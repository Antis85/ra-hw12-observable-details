(this["webpackJsonpra-hw12-observable-details"]=this["webpackJsonpra-hw12-observable-details"]||[]).push([[0],{62:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(27),a=n.n(r),i=n(19),o=n(4),s=n(10),u="REMOVE_SERVICE",l="CHANGE_ADD_FIELD",j="CHANGE_EDIT_FIELD",b="FILTER_SERVICE",d="CHANGE_FILTER_FIELD",O="CLEAR_FORM",p="CLEAR_FILTER",v="FETCH_SERVICES_REQUEST",f="FETCH_SERVICES_SUCCESS",m="FETCH_SERVICES_FAILED",h="ADD_SERVICES_REQUEST",E="ADD_SERVICES_SUCCESS",g="ADD_SERVICES_FAILED",x="EDIT_SERVICES_REQUEST",y="EDIT_SERVICES_SUCCESS",S="EDIT_SERVICES_FAILED";function C(){return{type:O}}function _(){return{type:v}}function I(e){return{type:m,payload:{error:e}}}function R(){return{type:E}}function D(e){return{type:g,payload:{error:e}}}function F(e){return{type:x,payload:{id:e}}}function T(e){return{type:y,payload:{item:e}}}function A(e){return{type:S,payload:{error:e}}}var L=n.p+"static/media/mcru-ajax-loader.6f9ac78c.gif",w=n(1);function N(){return Object(w.jsx)("div",{className:"loader",children:Object(w.jsx)("img",{src:L,alt:"LOADING..."})})}function k(){var e=Object(s.c)((function(e){return e.serviceEdit})),t=e.item,n=e.loading,r=e.error,a=e.redirect,i=Object(o.g)(),u=Object(o.h)(),l=Object(s.b)();Object(c.useEffect)((function(){l(F(u.id))}),[l,u.id]),Object(c.useEffect)((function(){a&&i("/")}),[i,a]);var b=function(e){var t=e.target,n=t.name,c=t.value;l(function(e,t){return{type:j,payload:{name:e,value:t}}}(n,c))};return Object(w.jsxs)(w.Fragment,{children:[n&&Object(w.jsx)(N,{}),r&&Object(w.jsxs)("div",{children:[r,Object(w.jsx)("button",{onClick:function(){l(F(u.id))},children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"})]}),!n&&!r&&Object(w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),!t.name||!t.price||t.price<=0||l(F(null))},onReset:function(e){l(C()),i("/")},children:[Object(w.jsx)("h3",{children:"Edit service:"}),Object(w.jsxs)("label",{children:["Name ",Object(w.jsx)("input",{name:"name",onChange:b,value:t.name})]}),Object(w.jsxs)("label",{children:["Price",Object(w.jsx)("input",{name:"price",type:"number",onChange:b,value:t.price})]}),Object(w.jsxs)("label",{children:["Content",Object(w.jsx)("input",{name:"content",onChange:b,value:t.content})]}),Object(w.jsx)("button",{type:"submit",disabled:n||!t.name||!t.price||t.price<=0,children:"Save"}),Object(w.jsx)("button",{type:"reset",disabled:n,children:"Close"})]})]})}function V(){var e=Object(s.c)((function(e){return e.serviceAdd})),t=e.item,n=e.loading,c=e.error,r=Object(s.b)(),a=function(e){var t=e.target,n=t.name,c=t.value;r(function(e,t){return{type:l,payload:{name:e,value:t}}}(n,c))};return Object(w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),!t.name||!t.price||t.price<=0||r({type:h})},onReset:function(e){r(C())},children:[Object(w.jsx)("h3",{children:"Add service:"}),Object(w.jsxs)("label",{children:["Name ",Object(w.jsx)("input",{name:"name",onChange:a,value:t.name})]}),Object(w.jsxs)("label",{children:["Price",Object(w.jsx)("input",{name:"price",type:"number",onChange:a,value:t.price})]}),Object(w.jsx)("button",{type:"submit",disabled:n||!t.name||!t.price||t.price<=0,children:"Save"}),Object(w.jsx)("button",{type:"reset",disabled:n,children:"Cancel"}),Object(w.jsx)("div",{children:c})]})}function U(){var e=Object(s.c)((function(e){return e.serviceFilter})).filter,t=Object(s.c)((function(e){return e.serviceList})).activeFilter,n=Object(s.b)();return Object(w.jsx)("label",{children:Object(w.jsxs)("form",{onSubmit:function(t){t.preventDefault(),n({type:b,payload:{setFilter:e}})},onReset:function(){n({type:p})},children:[Object(w.jsx)("h3",{children:"Filter services:"}),Object(w.jsxs)("div",{children:["Active filter: ",t?'"'.concat(t,'"'):"NO"]}),Object(w.jsx)("input",{name:"filter",onChange:function(e){var t=e.target.value;n(function(e){return{type:d,payload:{filter:e}}}(t))},value:e}),Object(w.jsx)("button",{type:"submit",children:"Set"}),Object(w.jsx)("button",{type:"reset",children:"Clear"})]})})}function H(){var e=Object(s.c)((function(e){return e.serviceList})),t=e.services,n=e.activeFilter,r=e.loading,a=e.error,i=Object(o.g)(),l=Object(s.b)();Object(c.useEffect)((function(){l(_())}),[l]);var j=function(e){l(function(e){return{type:u,payload:{id:e}}}(e))},b=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})),d=(b.length?b:t).map((function(e){return Object(w.jsxs)("li",{children:[e.name," ",e.price,Object(w.jsx)("button",{disabled:e.loading,onClick:function(){var t;(t=e.id)&&i("/"+t+"/details")},children:"\u270e"}),Object(w.jsx)("button",{disabled:e.loading,onClick:function(){return j(e.id)},children:"\u2715"})]},e.id)}));return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(V,{}),Object(w.jsx)(U,{}),r&&Object(w.jsx)(N,{}),a&&Object(w.jsxs)("div",{children:[a,Object(w.jsx)("button",{onClick:function(){l(_())},children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"})]}),!r&&!a&&Object(w.jsx)("ul",{children:!b.length&&n?"Nothing to display. Try another filter string!":d})]})}function P(){return Object(w.jsxs)("div",{className:"page-404",children:[Object(w.jsx)("div",{className:"page-404__header",children:"404"}),Object(w.jsx)("div",{className:"page-404__main",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430..."}),Object(w.jsx)(i.b,{to:"/",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})}n(61);function G(){return Object(w.jsx)(i.a,{children:Object(w.jsx)("div",{className:"page",children:Object(w.jsxs)(o.d,{children:[Object(w.jsx)(o.b,{path:"/:id/details",element:Object(w.jsx)(k,{})}),Object(w.jsx)(o.b,{path:"/services",element:Object(w.jsx)(H,{})}),Object(w.jsx)(o.b,{path:"/",element:Object(w.jsx)(o.a,{to:"/services"})}),Object(w.jsx)(o.b,{path:"*",element:Object(w.jsx)(P,{})})]})})})}var J=n(26),M=n(3),Q={services:[],activeFilter:"",loading:!1,error:null};var X=n(20),$={item:{name:"",price:""},loading:!1,error:null};var B={item:{id:"",name:"",price:"",content:""},loading:!1,error:null,redirect:!1};var q={filter:""};var z=n(71),K=n(70),W=n(65),Y=n(69),Z=n(72),ee=n(66),te=n(67),ne=n(37),ce=n(68),re=n(47),ae=n(63),ie=Object(J.b)({serviceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(M.a)(Object(M.a)({},e),{},{loading:!0,error:null});case f:var n=t.payload.services;return Object(M.a)(Object(M.a)({},e),{},{loading:!1,services:n});case m:var c=t.payload.error;return Object(M.a)(Object(M.a)({},e),{},{loading:!1,error:c});case u:var r=t.payload.id,a=e.services.find((function(e){return e.id===r}));return a&&(a.loading=!0),Object(M.a)({},e);case b:var i=t.payload.setFilter;return Object(M.a)(Object(M.a)({},e),{},{activeFilter:i});case p:return Object(M.a)(Object(M.a)({},e),{},{activeFilter:Q.activeFilter});default:return e}},serviceAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:var n=t.payload,c=n.name,r=n.value;return Object(M.a)(Object(M.a)({},e),{},{item:Object(M.a)(Object(M.a)({},e.item),{},Object(X.a)({},c,r))});case O:return Object(M.a)(Object(M.a)({},e),{},{item:$.item});case E:return Object(M.a)({},$);case h:return Object(M.a)(Object(M.a)({},e),{},{loading:!0,error:null});case g:var a=t.payload.error;return Object(M.a)(Object(M.a)({},e),{},{loading:!1,error:a});default:return e}},serviceEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:var n=t.payload,c=n.name,r=n.value;return Object(M.a)(Object(M.a)({},e),{},{item:Object(M.a)(Object(M.a)({},e.item),{},Object(X.a)({},c,r))});case O:return Object(M.a)(Object(M.a)({},e),{},{item:B.item});case y:var a=t.payload.item;return console.log("EDIT_SERVICES_SUCCESS_action.payload.item: ",a),a.id?Object(M.a)(Object(M.a)({},e),{},{item:a,loading:!1,redirect:!1}):Object(M.a)(Object(M.a)({},B),{},{redirect:!0});case x:return Object(M.a)(Object(M.a)({},e),{},{loading:!0,error:null});case S:var i=t.payload.error;return Object(M.a)(Object(M.a)({},e),{},{loading:!1,error:i});default:return e}},serviceFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:var n=t.payload.filter;return Object(M.a)(Object(M.a)({},e),{},{filter:n});case p:return Object(M.a)({},q);default:return e}}}),oe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||J.c,se=Object(z.a)((function(e,t){return e.pipe(Object(W.a)(v),Object(ee.a)((function(e){return console.log(e)})),Object(te.a)((function(){return Z.a.getJSON("".concat("https://antis-ra-hw-thunk.herokuapp.com/api/services")).pipe(Object(ee.a)((function(e){return console.log("response posts list:",e)})),Object(ne.a)((function(e){return{type:f,payload:{services:e}}})),Object(ce.a)((function(e){return Object(Y.a)(I("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! ".concat(e.name,": ").concat(e.message)))})))})))}),(function(e,t){return e.pipe(Object(W.a)(u),Object(ee.a)((function(e){return console.log(e)})),Object(ne.a)((function(e){return e.payload.id})),Object(re.a)((function(e){return Object(Z.a)({url:"".concat("https://antis-ra-hw-thunk.herokuapp.com/api/services","/").concat(e),method:"DELETE"}).pipe(Object(ee.a)((function(e){return console.log("response post deleted:",e)})),Object(ne.a)(_),Object(ce.a)((function(e){return Object(Y.a)(I("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! ".concat(e.name,": ").concat(e.message)))})))})))}),(function(e,t){return e.pipe(Object(W.a)(x),Object(ee.a)((function(e){return console.log(e)})),Object(ne.a)((function(e){return e.payload.id})),Object(ae.a)((function(e){return e})),Object(te.a)((function(e){return Z.a.getJSON("".concat("https://antis-ra-hw-thunk.herokuapp.com/api/services","/").concat(e)).pipe(Object(ee.a)((function(e){return console.log("response post get details: ",e)})),Object(ne.a)((function(e){return T(e)})),Object(ce.a)((function(e){return Object(Y.a)(A("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! ".concat(e.name,": ").concat(e.message)))})))})))}),(function(e,t){return e.pipe(Object(W.a)(h),Object(ee.a)((function(e){return console.log(e)})),Object(ee.a)((function(){return console.log("state$_add_item: ",t.value.serviceAdd.item)})),Object(re.a)((function(){return Object(Z.a)({url:"".concat("https://antis-ra-hw-thunk.herokuapp.com/api/services"),method:"POST",headers:{"Content-Type":"application/json","rxjs-custom-header":"Rxjs"},body:{id:0,name:t.value.serviceAdd.item.name,price:t.value.serviceAdd.item.price}}).pipe(Object(ee.a)((function(e){return console.log("response post added",e)})),Object(ne.a)(R),Object(ce.a)((function(e){return Object(Y.a)(D("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! ".concat(e.name,": ").concat(e.message)))})))})))}),(function(e,t){return e.pipe(Object(W.a)(x),Object(ee.a)((function(e){return console.log(e)})),Object(ee.a)((function(){return console.log("state$_edit_item:",t.value.serviceEdit.item)})),Object(ne.a)((function(e){return e.payload.id})),Object(ae.a)((function(e){return!e})),Object(te.a)((function(){return Object(Z.a)({url:"".concat("https://antis-ra-hw-thunk.herokuapp.com/api/services"),method:"POST",headers:{"Content-Type":"application/json","rxjs-custom-header":"Rxjs"},body:{id:t.value.serviceEdit.item.id,name:t.value.serviceEdit.item.name,price:t.value.serviceEdit.item.price,content:t.value.serviceEdit.item.content}}).pipe(Object(ee.a)((function(e){return console.log("response post edited",e)})),Object(ne.a)(T),Object(ce.a)((function(e){return Object(Y.a)(A("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! ".concat(e.name,": ").concat(e.message)))})))})))}),(function(e,t){return e.pipe(Object(W.a)(E),Object(ee.a)((function(e){return console.log(e)})),Object(ne.a)(_),Object(ee.a)((function(e){return console.log("response posts list:",e)})),Object(ce.a)((function(e){return Object(Y.a)(D("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! ".concat(e.name,": ").concat(e.message)))})))})),ue=Object(K.a)(),le=Object(J.d)(ie,oe(Object(J.a)(ue)));ue.run(se);var je=le;a.a.render(Object(w.jsx)(s.a,{store:je,children:Object(w.jsx)(G,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.902906e1.chunk.js.map